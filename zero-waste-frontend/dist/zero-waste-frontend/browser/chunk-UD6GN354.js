import{a as We,b as Qe,c as xt}from"./chunk-R6HSGQMS.js";import{a as Ze,b as Ke,c as Je,d as Mt}from"./chunk-KQIXHO63.js";import{a as Ot}from"./chunk-LSZMVTAP.js";import{a as Y,b as w,c as ii,d as Lt}from"./chunk-EAFGYPA3.js";import{e as V,j as Ct}from"./chunk-TU25NA76.js";import{a as je,b as Ye,c as He,d as Ue,e as qe,f as Xe,g as yt,h as Tt,i as St,j as ti,l as It,m as Dt,n as Pt,o as E,p as B,q as wt,r as j}from"./chunk-JWQ7PSM2.js";import{a as Fe,d as vt,e as $e,g as bt,j as N,l as ei,m as Et}from"./chunk-LRXY6OD2.js";import{Ba as ut,Da as O,Fa as ft,Ga as ke,I as Te,J as Se,Ja as Ge,K as Ie,Ka as ze,La as Re,Na as Ne,Oa as Ve,P as De,R as Nt,Ra as Be,Sa as _t,Ta as ht,Y as ct,Z as Pe,_ as Vt,a as ve,aa as R,ba as I,ca as Ee,k as be,ka as we,na as Oe,p as J,q as z,ta as dt,u as xe,v as Ce,w as Rt,wa as Le,y as Me,ya as Ae,za as gt}from"./chunk-FXEP3DK6.js";import{$ as it,$b as s,Bb as Z,Ca as ot,Eb as G,Ec as fe,Fb as ae,Gb as re,Hb as se,Ib as r,Jb as a,Ka as ie,Kb as C,Lc as _e,Mc as he,Nc as pt,Ob as v,Pa as zt,Qb as d,Qc as ye,Rb as g,Tc as P,Vb as le,W as D,Wb as me,Xb as pe,_b as nt,a as T,aa as A,ac as M,b as X,bb as m,bc as b,ca as W,cc as ce,ea as Wt,ec as at,fa as f,fc as rt,ga as Qt,gb as x,gc as st,ha as Zt,ib as oe,ic as de,jc as ge,lc as ue,m as $,na as _,nb as S,o as Xt,oa as h,ob as F,pa as Q,pb as ne,qa as Kt,rc as lt,sb as u,ta as Jt,uc as mt,v as $t,vc as K,ya as te,yb as k,za as ee,zb as p}from"./chunk-56SOJHVL.js";var _i=["tooltip"],Bt=20;var jt=new W("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let o=f(dt);return()=>o.scrollStrategies.reposition({scrollThrottle:Bt})}});function ai(o){return()=>o.scrollStrategies.reposition({scrollThrottle:Bt})}var ri={provide:jt,deps:[dt],useFactory:ai};function si(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var li=new W("mat-tooltip-default-options",{providedIn:"root",factory:si});var oi="tooltip-panel",ni=Ce({passive:!0}),hi=8,yi=8,vi=24,bi=200,tt=(()=>{class o{_elementRef=f(ot);_ngZone=f(ee);_platform=f(xe);_ariaDescriber=f(De);_focusMonitor=f(Me);_dir=f(Pe);_injector=f(Jt);_viewContainerRef=f(oe);_defaultOptions=f(li,{optional:!0});_overlayRef;_tooltipInstance;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=mi;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=Nt(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){let e=Nt(t);this._disabled!==e&&(this._disabled=e,e?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Rt(t)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Rt(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(t){let e=this._message;this._message=t!=null?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(e)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new $;_isDestroyed=!1;constructor(){let t=this._defaultOptions;t&&(this._showDelay=t.showDelay,this._hideDelay=t.hideDelay,t.position&&(this.position=t.position),t.positionAtOrigin&&(this.positionAtOrigin=t.positionAtOrigin),t.touchGestures&&(this.touchGestures=t.touchGestures),t.tooltipClass&&(this.tooltipClass=t.tooltipClass)),this._viewportMargin=hi}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(D(this._destroyed)).subscribe(t=>{t?t==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let t=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([e,i])=>{t.removeEventListener(e,i,ni)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,e){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let i=this._createOverlay(e);this._detach(),this._portal=this._portal||new Ee(this._tooltipComponent,this._viewContainerRef);let l=this._tooltipInstance=i.attach(this._portal).instance;l._triggerElement=this._elementRef.nativeElement,l._mouseLeaveHideDelay=this._hideDelay,l.afterHidden().pipe(D(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),l.show(t)}hide(t=this.hideDelay){let e=this._tooltipInstance;e&&(e.isVisible()?e.hide(t):(e._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){let c=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&c._origin instanceof ot)return this._overlayRef;this._detach()}let e=this._injector.get(we).getAncestorScrollContainers(this._elementRef),i=this._injector.get(dt),l=i.position().flexibleConnectedTo(this.positionAtOrigin?t||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(e);return l.positionChanges.pipe(D(this._destroyed)).subscribe(c=>{this._updateCurrentPositionClass(c.connectionPair),this._tooltipInstance&&c.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=i.create({direction:this._dir,positionStrategy:l,panelClass:`${this._cssClassPrefix}-${oi}`,scrollStrategy:this._injector.get(jt)()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(D(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(D(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(D(this._destroyed)).subscribe(c=>{this._isTooltipVisible()&&c.keyCode===27&&!Ie(c)&&(c.preventDefault(),c.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(D(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){let e=t.getConfig().positionStrategy,i=this._getOrigin(),l=this._getOverlayPosition();e.withPositions([this._addOffset(T(T({},i.main),l.main)),this._addOffset(T(T({},i.fallback),l.fallback))])}_addOffset(t){let e=yi,i=!this._dir||this._dir.value=="ltr";return t.originY==="top"?t.offsetY=-e:t.originY==="bottom"?t.offsetY=e:t.originX==="start"?t.offsetX=i?-e:e:t.originX==="end"&&(t.offsetX=i?e:-e),t}_getOrigin(){let t=!this._dir||this._dir.value=="ltr",e=this.position,i;e=="above"||e=="below"?i={originX:"center",originY:e=="above"?"top":"bottom"}:e=="before"||e=="left"&&t||e=="right"&&!t?i={originX:"start",originY:"center"}:(e=="after"||e=="right"&&t||e=="left"&&!t)&&(i={originX:"end",originY:"center"});let{x:l,y:c}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:l,originY:c}}}_getOverlayPosition(){let t=!this._dir||this._dir.value=="ltr",e=this.position,i;e=="above"?i={overlayX:"center",overlayY:"bottom"}:e=="below"?i={overlayX:"center",overlayY:"top"}:e=="before"||e=="left"&&t||e=="right"&&!t?i={overlayX:"end",overlayY:"center"}:(e=="after"||e=="right"&&t||e=="left"&&!t)&&(i={overlayX:"start",overlayY:"center"});let{x:l,y:c}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:l,overlayY:c}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),zt(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,e){return this.position==="above"||this.position==="below"?e==="top"?e="bottom":e==="bottom"&&(e="top"):t==="end"?t="start":t==="start"&&(t="end"),{x:t,y:e}}_updateCurrentPositionClass(t){let{overlayY:e,originX:i,originY:l}=t,c;if(e==="center"?this._dir&&this._dir.value==="rtl"?c=i==="end"?"left":"right":c=i==="start"?"left":"right":c=e==="bottom"&&l==="top"?"above":"below",c!==this._currentPosition){let y=this._overlayRef;if(y){let q=`${this._cssClassPrefix}-${oi}-`;y.removePanelClass(q+this._currentPosition),y.addPanelClass(q+c)}this._currentPosition=c}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{this._setupPointerExitEventsIfNeeded();let e;t.x!==void 0&&t.y!==void 0&&(e=t),this.show(void 0,e)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{let e=t.targetTouches?.[0],i=e?{x:e.clientX,y:e.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let l=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,i)},this._defaultOptions?.touchLongPressShowDelay??l)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",e=>{let i=e.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",e=>this._wheelListener(e)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let e=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};t.push(["touchend",e],["touchcancel",e])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([e,i])=>{this._elementRef.nativeElement.addEventListener(e,i,ni)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){let e=this._injector.get(fe).elementFromPoint(t.clientX,t.clientY),i=this._elementRef.nativeElement;e!==i&&!i.contains(e)&&this.hide()}}_disableNativeGesturesIfNecessary(){let t=this.touchGestures;if(t!=="off"){let e=this._elementRef.nativeElement,i=e.style;(t==="on"||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA")&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),(t==="on"||!e.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}_syncAriaDescription(t){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,t,"tooltip"),this._isDestroyed||zt({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(e){return new(e||o)};static \u0275dir=ne({type:o,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(e,i){e&2&&Z("mat-mdc-tooltip-disabled",i.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return o})(),mi=(()=>{class o{_changeDetectorRef=f(lt);_elementRef=f(ot);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled;_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new $;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){let t=f(ie,{optional:!0});this._animationsDisabled=t==="NoopAnimations"}show(t){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>vi&&t.width>=bi}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){let e=this._tooltip.nativeElement,i=this._showAnimation,l=this._hideAnimation;if(e.classList.remove(t?l:i),e.classList.add(t?i:l),this._isVisible!==t&&(this._isVisible=t,this._changeDetectorRef.markForCheck()),t&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let c=getComputedStyle(e);(c.getPropertyValue("animation-duration")==="0s"||c.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(e.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=S({type:o,selectors:[["mat-tooltip-component"]],viewQuery:function(e,i){if(e&1&&le(_i,7),e&2){let l;me(l=pe())&&(i._tooltip=l.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(e,i){e&1&&d("mouseleave",function(c){return i._handleMouseLeave(c)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(e,i){if(e&1){let l=v();r(0,"div",1,0),d("animationend",function(y){return _(l),h(i._handleAnimationEnd(y))}),r(2,"div",2),s(3),a()()}e&2&&(Z("mdc-tooltip--multiline",i._isMultiline),p("ngClass",i.tooltipClass),m(3),M(i.message))},dependencies:[_e],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}return o})(),L=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=F({type:o});static \u0275inj=A({providers:[ri],imports:[Te,Le,Vt,Vt,Oe]})}return o})();function xi(o,n){if(o&1&&(r(0,"mat-option",17),s(1),a()),o&2){let t=n.$implicit;p("value",t),m(),b(" ",t," ")}}function Ci(o,n){if(o&1){let t=v();r(0,"mat-form-field",14)(1,"mat-select",16,0),d("selectionChange",function(i){_(t);let l=g(2);return h(l._changePageSize(i.value))}),re(3,xi,2,2,"mat-option",17,ae),a(),r(5,"div",18),d("click",function(){_(t);let i=nt(2);return h(i.open())}),a()()}if(o&2){let t=g(2);p("appearance",t._formFieldAppearance)("color",t.color),m(),p("value",t.pageSize)("disabled",t.disabled)("aria-labelledby",t._pageSizeLabelId)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),m(2),se(t._displayedPageSizeOptions)}}function Mi(o,n){if(o&1&&(r(0,"div",15),s(1),a()),o&2){let t=g(2);m(),M(t.pageSize)}}function Ti(o,n){if(o&1&&(r(0,"div",3)(1,"div",13),s(2),a(),u(3,Ci,6,7,"mat-form-field",14)(4,Mi,2,1,"div",15),a()),o&2){let t=g();m(),k("id",t._pageSizeLabelId),m(),b(" ",t._intl.itemsPerPageLabel," "),m(),G(t._displayedPageSizeOptions.length>1?3:-1),m(),G(t._displayedPageSizeOptions.length<=1?4:-1)}}function Si(o,n){if(o&1){let t=v();r(0,"button",19),d("click",function(){_(t);let i=g();return h(i._buttonClicked(0,i._previousButtonsDisabled()))}),Q(),r(1,"svg",8),C(2,"path",20),a()()}if(o&2){let t=g();p("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("disabled",t._previousButtonsDisabled())("tabindex",t._previousButtonsDisabled()?-1:null),k("aria-label",t._intl.firstPageLabel)}}function Ii(o,n){if(o&1){let t=v();r(0,"button",21),d("click",function(){_(t);let i=g();return h(i._buttonClicked(i.getNumberOfPages()-1,i._nextButtonsDisabled()))}),Q(),r(1,"svg",8),C(2,"path",22),a()()}if(o&2){let t=g();p("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("disabled",t._nextButtonsDisabled())("tabindex",t._nextButtonsDisabled()?-1:null),k("aria-label",t._intl.lastPageLabel)}}var At=(()=>{class o{changes=new $;itemsPerPageLabel="Items per page:";nextPageLabel="Next page";previousPageLabel="Previous page";firstPageLabel="First page";lastPageLabel="Last page";getRangeLabel=(t,e,i)=>{if(i==0||e==0)return`0 of ${i}`;i=Math.max(i,0);let l=t*e,c=l<i?Math.min(l+e,i):l+e;return`${l+1} \u2013 ${c} of ${i}`};static \u0275fac=function(e){return new(e||o)};static \u0275prov=it({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Di(o){return o||new At}var Pi={provide:At,deps:[[new Qt,new Zt,At]],useFactory:Di},Ei=50;var wi=new W("MAT_PAGINATOR_DEFAULT_OPTIONS"),Yt=(()=>{class o{_intl=f(At);_changeDetectorRef=f(lt);_formFieldAppearance;_pageSizeLabelId=f(Se).getId("mat-paginator-page-size-label-");_intlChanges;_isInitialized=!1;_initializedStream=new Xt(1);color;get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(t||0,0),this._changeDetectorRef.markForCheck()}_pageIndex=0;get length(){return this._length}set length(t){this._length=t||0,this._changeDetectorRef.markForCheck()}_length=0;get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(t||0,0),this._updateDisplayedPageSizeOptions()}_pageSize;get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(e=>K(e,0)),this._updateDisplayedPageSizeOptions()}_pageSizeOptions=[];hidePageSize=!1;showFirstLastButtons=!1;selectConfig={};disabled=!1;page=new te;_displayedPageSizeOptions;initialized=this._initializedStream;constructor(){let t=this._intl,e=f(wi,{optional:!0});if(this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),e){let{pageSize:i,pageSizeOptions:l,hidePageSize:c,showFirstLastButtons:y}=e;i!=null&&(this._pageSize=i),l!=null&&(this._pageSizeOptions=l),c!=null&&(this.hidePageSize=c),y!=null&&(this.showFirstLastButtons=y)}this._formFieldAppearance=e?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){this.hasNextPage()&&this._navigate(this.pageIndex+1)}previousPage(){this.hasPreviousPage()&&this._navigate(this.pageIndex-1)}firstPage(){this.hasPreviousPage()&&this._navigate(0)}lastPage(){this.hasNextPage()&&this._navigate(this.getNumberOfPages()-1)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let t=this.getNumberOfPages()-1;return this.pageIndex<t&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){let e=this.pageIndex*this.pageSize,i=this.pageIndex;this.pageIndex=Math.floor(e/t)||0,this.pageSize=t,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:Ei),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,e)=>t-e),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}_navigate(t){let e=this.pageIndex;t!==e&&(this.pageIndex=t,this._emitPageEvent(e))}_buttonClicked(t,e){e||this._navigate(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=S({type:o,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",K],length:[2,"length","length",K],pageSize:[2,"pageSize","pageSize",K],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",mt],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",mt],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",mt]},outputs:{page:"page"},exportAs:["matPaginator"],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,i){e&1&&(r(0,"div",1)(1,"div",2),u(2,Ti,5,4,"div",3),r(3,"div",4)(4,"div",5),s(5),a(),u(6,Si,3,5,"button",6),r(7,"button",7),d("click",function(){return i._buttonClicked(i.pageIndex-1,i._previousButtonsDisabled())}),Q(),r(8,"svg",8),C(9,"path",9),a()(),Kt(),r(10,"button",10),d("click",function(){return i._buttonClicked(i.pageIndex+1,i._nextButtonsDisabled())}),Q(),r(11,"svg",8),C(12,"path",11),a()(),u(13,Ii,3,5,"button",12),a()()()),e&2&&(m(2),G(i.hidePageSize?-1:2),m(3),b(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),m(),G(i.showFirstLastButtons?6:-1),m(),p("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("disabled",i._previousButtonsDisabled())("tabindex",i._previousButtonsDisabled()?-1:null),k("aria-label",i._intl.previousPageLabel),m(3),p("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("disabled",i._nextButtonsDisabled())("tabindex",i._nextButtonsDisabled()?-1:null),k("aria-label",i._intl.nextPageLabel),m(3),G(i.showFirstLastButtons?13:-1))},dependencies:[N,Y,V,ct,tt],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-sys-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-sys-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-sys-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-sys-body-small-tracking));--mat-form-field-container-height:var(--mat-paginator-form-field-container-height, 40px);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding, 8px)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-sys-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size, 56px)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}@media(forced-colors: active){.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon,.mat-mdc-paginator-icon{fill:currentColor}.mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-range-actions .mat-mdc-icon-button[aria-disabled]{color:GrayText}}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display, block);position:absolute;top:50%;left:50%;width:84px;height:48px;background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}"],encapsulation:2,changeDetection:0})}return o})(),Ft=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=F({type:o});static \u0275inj=A({providers:[Pi],imports:[I,w,L,Yt]})}return o})();var kt=class o{constructor(n,t){this.dialogRef=n;this.data=t}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||o)(x(Tt),x(St))};static \u0275cmp=S({type:o,selectors:[["app-confirmation-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){t&1&&(r(0,"h2",0),s(1),a(),r(2,"mat-dialog-content"),s(3),a(),r(4,"mat-dialog-actions",1)(5,"button",2),d("click",function(){return e.onDismiss()}),s(6,"Cancel"),a(),r(7,"button",3),d("click",function(){return e.onConfirm()}),s(8,"Confirm"),a()()),t&2&&(m(),M(e.data.title),m(2),b(" ",e.data.message," "))},dependencies:[P,I,R,E,It,Pt,Dt],encapsulation:2})};var U=class o{constructor(n){this.http=n}getAllGroceries(){return this.http.get(`${z.apiUrl}/groceries`).pipe($t(n=>n.map(t=>X(T({},t),{storageLocation:this.formatStorageLocation(t.storageLocation),expiryDate:t.expiry_date,manufactureDate:t.manufacture_date}))))}getGrocery(n){return this.http.get(`${z.apiUrl}/groceries/${n}`)}createGrocery(n){return this.http.post(`${z.apiUrl}/groceries`,n)}updateGrocery(n,t){return this.http.put(`${z.apiUrl}/groceries/${n}`,t)}deleteGrocery(n){return this.http.delete(`${z.apiUrl}/groceries/${n}`)}formatStorageLocation(n){switch(n){case"refrigerator":return"Refrigerator";case"deep_freeze":return"Deep Freeze";case"dry_pantry":return"Dry Pantry";default:return n}}static \u0275fac=function(t){return new(t||o)(Wt(ve))};static \u0275prov=it({token:o,factory:o.\u0275fac,providedIn:"root"})};function Ri(o,n){o&1&&(r(0,"mat-error"),s(1,"Name is required"),a())}function Ni(o,n){o&1&&(r(0,"mat-error"),s(1,"Quantity is required"),a())}function Vi(o,n){o&1&&(r(0,"mat-error"),s(1,"Quantity must be greater than 0"),a())}function Bi(o,n){o&1&&(r(0,"mat-error"),s(1,"Unit is required"),a())}function ji(o,n){o&1&&(r(0,"mat-error"),s(1,"Expiry date is required"),a())}function Yi(o,n){o&1&&(r(0,"mat-error"),s(1,"Expiry date cannot be in the past or today"),a())}function Hi(o,n){o&1&&(r(0,"mat-error"),s(1,"Storage location is required"),a())}function Ui(o,n){if(o&1&&(r(0,"div",22),s(1),a()),o&2){let t=g();m(),M(t.errorMessage)}}function qi(){return o=>{let n=new Date(o.value),t=new Date;return t.setHours(0,0,0,0),o.value&&n<=t?{pastDate:!0}:null}}var et=class o{constructor(n,t,e,i){this.fb=n;this.groceryService=t;this.dialogRef=e;this.data=i;this.groceryForm=this.fb.group({name:["",O.required],quantity:[0,[O.required,O.min(.1)]],unit:["",O.required],expiryDate:["",[O.required,qi()]],storageLocation:["fridge",O.required]}),i?.grocery&&(this.isEdit=!0,this.groceryForm.patchValue(X(T({},i.grocery),{expiryDate:i.grocery.expiry_date?new Date(i.grocery.expiry_date):""})))}groceryForm;isEdit=!1;loading=!1;errorMessage="";onSubmit(){if(this.groceryForm.invalid)return;this.loading=!0,this.errorMessage="";let n=this.groceryForm.value,t=X(T({},n),{quantity:Number(n.quantity),expiry_date:n.expiryDate?n.expiryDate.toISOString():null});(this.isEdit&&this.data.grocery?.id?this.groceryService.updateGrocery(String(this.data.grocery.id),t):this.groceryService.createGrocery(t)).subscribe({next:()=>{this.loading=!1,this.dialogRef.close(!0)},error:i=>{this.loading=!1,this.errorMessage=i?.error?.message||"Failed to save grocery item. Please try again."}})}static \u0275fac=function(t){return new(t||o)(x(Be),x(U),x(Tt),x(St))};static \u0275cmp=S({type:o,selectors:[["app-grocery-edit-dialog"]],decls:47,vars:14,consts:[["picker",""],["mat-dialog-title",""],["mat-dialog-content","",2,"padding-top","1rem"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","name","placeholder","Enter item name"],[4,"ngIf"],[1,"form-row"],["appearance","outline",1,"quantity-field"],["matInput","","type","number","formControlName","quantity","placeholder","Enter quantity"],["appearance","outline",1,"unit-field"],["matInput","","formControlName","unit","placeholder","e.g., kg, L"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","storageLocation"],["value","Fridge"],["value","Pantry"],["value","Freezer"],["class","error-message",4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"error-message"]],template:function(t,e){if(t&1){let i=v();r(0,"h1",1),s(1),a(),r(2,"div",2)(3,"form",3)(4,"mat-form-field",4)(5,"mat-label"),s(6,"Name"),a(),C(7,"input",5),u(8,Ri,2,0,"mat-error",6),a(),r(9,"div",7)(10,"mat-form-field",8)(11,"mat-label"),s(12,"Quantity"),a(),C(13,"input",9),u(14,Ni,2,0,"mat-error",6)(15,Vi,2,0,"mat-error",6),a(),r(16,"mat-form-field",10)(17,"mat-label"),s(18,"Unit"),a(),C(19,"input",11),u(20,Bi,2,0,"mat-error",6),a()(),r(21,"mat-form-field",4)(22,"mat-label"),s(23,"Expiry Date"),a(),C(24,"input",12)(25,"mat-datepicker-toggle",13)(26,"mat-datepicker",null,0),u(28,ji,2,0,"mat-error",6)(29,Yi,2,0,"mat-error",6),a(),r(30,"mat-form-field",4)(31,"mat-label"),s(32,"Storage Location"),a(),r(33,"mat-select",14)(34,"mat-option",15),s(35,"Fridge"),a(),r(36,"mat-option",16),s(37,"Pantry"),a(),r(38,"mat-option",17),s(39,"Freezer"),a()(),u(40,Hi,2,0,"mat-error",6),a(),u(41,Ui,2,1,"div",18),a()(),r(42,"div",19)(43,"button",20),d("click",function(){return _(i),h(e.dialogRef.close())}),s(44,"Cancel"),a(),r(45,"button",21),d("click",function(){return _(i),h(e.onSubmit())}),s(46),a()()}if(t&2){let i,l,c,y,q,Ht,Ut,qt=nt(27);m(),b("",e.isEdit?"Edit":"Add"," Grocery Item"),m(2),p("formGroup",e.groceryForm),m(5),p("ngIf",(i=e.groceryForm.get("name"))==null?null:i.hasError("required")),m(6),p("ngIf",(l=e.groceryForm.get("quantity"))==null?null:l.hasError("required")),m(),p("ngIf",(c=e.groceryForm.get("quantity"))==null?null:c.hasError("min")),m(5),p("ngIf",(y=e.groceryForm.get("unit"))==null?null:y.hasError("required")),m(4),p("matDatepicker",qt),m(),p("for",qt),m(3),p("ngIf",(q=e.groceryForm.get("expiryDate"))==null?null:q.hasError("required")),m(),p("ngIf",(Ht=e.groceryForm.get("expiryDate"))==null?null:Ht.hasError("pastDate")),m(11),p("ngIf",(Ut=e.groceryForm.get("storageLocation"))==null?null:Ut.hasError("required")),m(),p("ngIf",e.errorMessage),m(4),p("disabled",e.groceryForm.invalid||e.loading),m(),b(" ",e.loading?"Saving...":e.isEdit?"Update":"Add"," ")}},dependencies:[P,pt,ht,ze,ut,Re,ft,ke,Ne,Ve,E,It,Pt,Dt,B,N,vt,$e,bt,j,wt,I,R,Mt,Ze,Ke,Je,w,Y,V,Ct],styles:[".form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.quantity-field[_ngcontent-%COMP%]{flex:1}.unit-field[_ngcontent-%COMP%]{width:150px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.error-message[_ngcontent-%COMP%]{color:#f44336;margin:1rem 0;padding:.5rem;background-color:#ffebee;border-radius:4px}button[mat-raised-button][_ngcontent-%COMP%]{margin-left:8px}.mat-mdc-dialog-actions[_ngcontent-%COMP%]{justify-content:flex-end;padding:16px 24px}"]})};var Xi=o=>["/groceries",o];function $i(o,n){if(o&1&&(r(0,"mat-option",10),s(1),a()),o&2){let t=n.$implicit;p("value",t),m(),b(" ",t," ")}}function Wi(o,n){if(o&1){let t=v();r(0,"mat-form-field",8)(1,"mat-label"),s(2,"Storage Location"),a(),r(3,"mat-select",9),st("ngModelChange",function(i){_(t);let l=g();return rt(l.storageLocationFilter,i)||(l.storageLocationFilter=i),h(i)}),d("ngModelChange",function(){_(t);let i=g();return h(i.applyFilters())}),r(4,"mat-option",10),s(5,"All Locations"),a(),u(6,$i,2,2,"mat-option",24),a()()}if(o&2){let t=g();m(3),at("ngModel",t.storageLocationFilter),m(),p("value",null),m(2),p("ngForOf",t.storageLocations)}}function Qi(o,n){if(o&1){let t=v();r(0,"mat-card",25)(1,"mat-card-content"),s(2),r(3,"button",26),d("click",function(){_(t);let i=g();return h(i.loadGroceries())}),s(4,"Retry"),a()()()}if(o&2){let t=g();m(2),b(" ",t.error," ")}}function Zi(o,n){o&1&&(r(0,"div",27),C(1,"mat-spinner",28),r(2,"p"),s(3,"Loading your groceries..."),a()())}function Ki(o,n){o&1&&(r(0,"p"),s(1," No results match your filters "),a())}function Ji(o,n){o&1&&(r(0,"p"),s(1," You haven't added any groceries yet "),a())}function to(o,n){if(o&1){let t=v();r(0,"mat-card",29)(1,"mat-card-content")(2,"mat-icon",30),s(3,"shopping_basket"),a(),r(4,"h3"),s(5,"No groceries found"),a(),u(6,Ki,2,0,"p",31)(7,Ji,2,0,"p",31),r(8,"button",3),d("click",function(){_(t);let i=g();return h(i.openAddDialog())}),r(9,"mat-icon"),s(10,"add"),a(),s(11," Add Your First Item "),a()()()}if(o&2){let t=g();m(6),p("ngIf",t.searchTerm||t.expiryFilter||t.storageLocationFilter),m(),p("ngIf",!(t.searchTerm||t.expiryFilter||t.storageLocationFilter))}}function eo(o,n){if(o&1&&(r(0,"mat-chip",40),s(1),ge(2,"date"),a()),o&2){let t=g().$implicit,e=g();p("color",e.isExpired(t.expiry_date)?"warn":"primary"),m(),b(" ",ue(2,2,t.expiry_date,"shortDate")," ")}}function io(o,n){if(o&1&&(r(0,"p"),s(1),a()),o&2){let t=g().$implicit;m(),M(t.description)}}function oo(o,n){o&1&&(r(0,"div",41),s(1," EXPIRED "),a())}function no(o,n){if(o&1){let t=v();r(0,"mat-card",32)(1,"mat-card-header")(2,"mat-card-title"),s(3),a(),r(4,"mat-card-subtitle")(5,"mat-chip-listbox")(6,"mat-chip"),s(7),a(),u(8,eo,3,5,"mat-chip",33),a()()(),r(9,"mat-card-content")(10,"p")(11,"strong"),s(12,"Quantity:"),a(),s(13),a(),u(14,io,2,1,"p",31),a(),u(15,oo,2,0,"div",34),r(16,"mat-card-actions",35)(17,"button",36)(18,"mat-icon"),s(19,"info"),a()(),r(20,"button",37),d("click",function(){let i=_(t).$implicit,l=g();return h(l.openEditDialog(i))}),r(21,"mat-icon"),s(22,"edit"),a()(),r(23,"button",38),d("click",function(){let i=_(t).$implicit,l=g();return h(l.deleteGrocery(i.id))}),r(24,"mat-icon",39),s(25,"delete"),a()()()()}if(o&2){let t=n.$implicit,e=g();Z("expired-card",e.isExpired(t.expiry_date)),m(3),M(t.name),m(4),M(t.storageLocation),m(),p("ngIf",t.expiry_date),m(5),ce(" ",t.quantity," ",t.unit,""),m(),p("ngIf",t.description),m(),p("ngIf",e.isExpired(t.expiry_date)),m(2),p("routerLink",de(10,Xi,t.id))}}function ao(o,n){if(o&1){let t=v();r(0,"mat-paginator",42),d("page",function(i){_(t);let l=g();return h(l.onPageChange(i))}),a()}if(o&2){let t=g();p("length",t.filteredGroceries.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)("pageIndex",t.pageIndex)}}var Gt=class o{constructor(n,t,e){this.groceryService=n;this.dialog=t;this.snackBar=e}groceries=[];filteredGroceries=[];loading=!0;error=null;searchTerm="";expiryFilter=null;storageLocationFilter=null;storageLocations=[];pageSize=8;pageIndex=0;pageSizeOptions=[4,8,12,24];ngOnInit(){this.loadGroceries()}loadGroceries(){this.loading=!0,this.error=null,this.groceryService.getAllGroceries().subscribe({next:n=>{this.groceries=n,this.storageLocations=[...new Set(n.map(t=>t.storageLocation))],this.applyFilters(),this.loading=!1},error:n=>{this.loading=!1,this.error="Failed to load groceries. Please try again later.",console.error("Failed to load groceries:",n)}})}applyFilters(){let n=[...this.groceries];if(this.searchTerm.trim()){let t=this.searchTerm.toLowerCase().trim();n=n.filter(e=>e.name.toLowerCase().includes(t))}if(this.expiryFilter)if(this.expiryFilter==="expired")n=n.filter(t=>t.expiry_date?new Date(t.expiry_date)<new Date:!1);else{let t=parseInt(this.expiryFilter,10);n=n.filter(e=>{if(!e.expiry_date)return!1;let i=new Date(e.expiry_date),l=new Date,c=i.getTime()-l.getTime(),y=Math.ceil(c/(1e3*60*60*24));return y<=t&&y>=0})}this.storageLocationFilter&&(n=n.filter(t=>t.storageLocation===this.storageLocationFilter)),this.filteredGroceries=n,this.pageIndex=0}clearFilters(){this.searchTerm="",this.expiryFilter=null,this.storageLocationFilter=null,this.applyFilters()}getPaginatedItems(){let n=this.pageIndex*this.pageSize;return this.filteredGroceries.slice(n,n+this.pageSize)}onPageChange(n){this.pageIndex=n.pageIndex,this.pageSize=n.pageSize}openAddDialog(){this.dialog.open(et,{width:"400px",data:{grocery:null}}).afterClosed().subscribe(t=>{t&&(this.loadGroceries(),this.snackBar.open("Grocery item added successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}))})}openEditDialog(n){this.dialog.open(et,{width:"400px",data:{grocery:n}}).afterClosed().subscribe(e=>{e&&(this.loadGroceries(),this.snackBar.open("Grocery item updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}))})}deleteGrocery(n){this.dialog.open(kt,{width:"300px",data:{title:"Delete Grocery",message:"Are you sure you want to delete this grocery item? This action cannot be undone."}}).afterClosed().subscribe(e=>{e&&this.groceryService.deleteGrocery(n.toString()).subscribe({next:()=>{this.groceries=this.groceries.filter(i=>i.id!==n),this.applyFilters(),this.snackBar.open("Grocery item deleted successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})},error:i=>{console.error("Failed to delete grocery:",i),this.snackBar.open("Failed to delete grocery item. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}})})}isExpired(n){if(!n)return!1;let t=new Date;return new Date(n)<t}static \u0275fac=function(t){return new(t||o)(x(U),x(ti),x(Ae))};static \u0275cmp=S({type:o,selectors:[["app-grocery-list"]],decls:43,vars:9,consts:[[1,"grocery-container"],[1,"filter-card"],[1,"filter-header"],["mat-raised-button","","color","primary",3,"click"],[1,"filter-controls"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name",3,"ngModelChange","ngModel"],["matSuffix",""],["appearance","outline"],[3,"ngModelChange","ngModel"],[3,"value"],["value","3"],["value","7"],["value","14"],["value","30"],["value","expired"],["appearance","outline",4,"ngIf"],["mat-stroked-button","",3,"click"],["class","error-card",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-card",4,"ngIf"],[1,"grocery-grid"],["class","grocery-card",3,"expired-card",4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","pageIndex","page",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"error-card"],["mat-button","","color","primary",3,"click"],[1,"loading-container"],["diameter","50"],[1,"empty-card"],[1,"empty-icon"],[4,"ngIf"],[1,"grocery-card"],["selected","",3,"color",4,"ngIf"],["class","expired-watermark",4,"ngIf"],["align","end"],["mat-icon-button","","matTooltip","Details",3,"routerLink"],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","","matTooltip","Delete",3,"click"],["color","warn"],["selected","",3,"color"],[1,"expired-watermark"],["aria-label","Select page",3,"page","length","pageSize","pageSizeOptions","pageIndex"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"h2"),s(4,"My Groceries"),a(),r(5,"button",3),d("click",function(){return e.openAddDialog()}),r(6,"mat-icon"),s(7,"add"),a(),s(8," Add New "),a()(),r(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),s(12,"Search groceries"),a(),r(13,"input",6),st("ngModelChange",function(l){return rt(e.searchTerm,l)||(e.searchTerm=l),l}),d("ngModelChange",function(){return e.applyFilters()}),a(),r(14,"mat-icon",7),s(15,"search"),a()(),r(16,"mat-form-field",8)(17,"mat-label"),s(18,"Expires Within"),a(),r(19,"mat-select",9),st("ngModelChange",function(l){return rt(e.expiryFilter,l)||(e.expiryFilter=l),l}),d("ngModelChange",function(){return e.applyFilters()}),r(20,"mat-option",10),s(21,"All Items"),a(),r(22,"mat-option",11),s(23,"3 Days"),a(),r(24,"mat-option",12),s(25,"7 Days"),a(),r(26,"mat-option",13),s(27,"14 Days"),a(),r(28,"mat-option",14),s(29,"30 Days"),a(),r(30,"mat-option",15),s(31,"Expired"),a()()(),u(32,Wi,7,3,"mat-form-field",16),r(33,"button",17),d("click",function(){return e.clearFilters()}),r(34,"mat-icon"),s(35,"clear_all"),a(),s(36," Clear Filters "),a()()(),u(37,Qi,5,1,"mat-card",18)(38,Zi,4,0,"div",19)(39,to,12,2,"mat-card",20),r(40,"div",21),u(41,no,26,12,"mat-card",22),a(),u(42,ao,1,4,"mat-paginator",23),a()),t&2&&(m(13),at("ngModel",e.searchTerm),m(6),at("ngModel",e.expiryFilter),m(),p("value",null),m(12),p("ngIf",e.storageLocations.length>0),m(5),p("ngIf",e.error),m(),p("ngIf",e.loading),m(),p("ngIf",!e.loading&&e.filteredGroceries.length===0),m(2),p("ngForOf",e.getPaginatedItems()),m(),p("ngIf",e.filteredGroceries.length>0))},dependencies:[P,he,pt,ye,J,be,_t,ut,ft,Ge,I,R,ct,Et,ei,E,Lt,ii,gt,Ft,Yt,w,N,vt,bt,Y,V,j,wt,yt,je,qe,He,Xe,Ue,Ye,L,tt,xt,We,Qe,Ot,B],styles:[".grocery-container[_ngcontent-%COMP%]{max-width:1400px;margin:24px auto;padding:0 16px;display:flex;flex-direction:column;gap:24px}.filter-card[_ngcontent-%COMP%]{padding:16px;border-radius:12px}.filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.filter-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;align-items:center}.search-field[_ngcontent-%COMP%]{grid-column:1 / -1}.grocery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.grocery-card[_ngcontent-%COMP%]{position:relative;transition:transform .2s,box-shadow .2s;overflow:hidden}.grocery-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 10px #0000001a}.mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:16px}.mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.mat-card-subtitle[_ngcontent-%COMP%], .mat-chip-list[_ngcontent-%COMP%]{margin-top:8px}.mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#000000b3}.mat-card-actions[_ngcontent-%COMP%]{padding:8px 16px!important;margin:0!important;border-top:1px solid rgba(0,0,0,.1)}.expired-card[_ngcontent-%COMP%]{background-color:#f443360d;border-left:4px solid #f44336}.expired-watermark[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-15deg);font-size:48px;font-weight:700;color:#f443361a;pointer-events:none;z-index:1;white-space:nowrap}.empty-card[_ngcontent-%COMP%], .error-card[_ngcontent-%COMP%]{text-align:center;padding:32px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#0003;margin-bottom:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px;gap:16px}.mat-paginator[_ngcontent-%COMP%]{background:transparent;margin-top:16px}@media (max-width: 768px){.filter-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.filter-controls[_ngcontent-%COMP%], .grocery-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.grocery-container[_ngcontent-%COMP%]{padding:0 8px}.mat-card[_ngcontent-%COMP%]{border-radius:8px!important}}"]})};var ro=[{path:"",component:Gt,canActivate:[Fe]}],ui=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=F({type:o});static \u0275inj=A({imports:[P,_t,ht,J.forChild(ro),I,yt,xt,Mt,E,B,Et,j,Ot,Ct,Ft,Lt,w,gt,L,J]})};export{ui as GroceriesModule};
