import{a as G}from"./chunk-IYYYGPIS.js";import{Ba as x,Da as d,Fa as k,Ga as F,Ka as O,Na as R,Oa as E,Ra as N,Ta as f,j as S,k as y,p as g,r as w,ya as P}from"./chunk-FXEP3DK6.js";import{$b as o,Ib as i,Jb as r,Kb as u,Nc as _,Qb as h,Rb as b,Tc as M,aa as D,bb as m,bc as C,gb as l,nb as v,ob as j,sb as c,zb as s}from"./chunk-56SOJHVL.js";function Q(t,a){t&1&&(i(0,"div",12),o(1," Please enter a valid email "),r())}function U(t,a){t&1&&(i(0,"div",12),o(1," Password is required "),r())}function W(t,a){if(t&1&&(i(0,"div",12),o(1),r()),t&2){let n=b();m(),C(" ",n.errorMessage," ")}}var I=class t{constructor(a,n,e,p,B){this.fb=a;this.authService=n;this.router=e;this.notificationService=p;this.snackBar=B;this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",d.required]})}loginForm;errorMessage="";onSubmit(){if(this.loginForm.invalid)return;let{email:a,password:n}=this.loginForm.value;this.authService.login(a,n).subscribe({next:()=>{this.snackBar.open("Login successful!","Dismiss",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/groceries"]),this.notificationService.requestPermission().subscribe({error:e=>console.error("Failed to get notification permission:",e)})},error:e=>{console.error("Login error:",e);let p=e?.error?.error||"Login failed. Please try again.";this.snackBar.open(p,"Dismiss",{duration:5e3,panelClass:["error-snackbar"]})}})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(n){return new(n||t)(l(N),l(w),l(S),l(G),l(P))};static \u0275cmp=v({type:t,selectors:[["app-login"]],decls:22,vars:5,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password"],["type","submit",1,"btn-primary",3,"disabled"],[1,"auth-link"],["routerLink","/auth/register"],[1,"error-message"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Login"),r(),i(4,"form",2),h("ngSubmit",function(){return e.onSubmit()}),i(5,"div",3)(6,"label",4),o(7,"Email"),r(),u(8,"input",5),c(9,Q,2,0,"div",6),r(),i(10,"div",3)(11,"label",7),o(12,"Password"),r(),u(13,"input",8),c(14,U,2,0,"div",6),r(),c(15,W,2,1,"div",6),i(16,"button",9),o(17,"Login"),r()(),i(18,"p",10),o(19,"Don't have an account? "),i(20,"a",11),o(21,"Register"),r()()()()),n&2&&(m(4),s("formGroup",e.loginForm),m(5),s("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),m(5),s("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),m(),s("ngIf",e.errorMessage),m(),s("disabled",e.loginForm.invalid))},dependencies:[f,O,x,k,F,R,E,g,y,M,_],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 200px);padding:2rem}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);padding:2rem;width:100%;max-width:400px}.auth-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--dark-color);text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:var(--border-radius);font-size:1rem}.error-message[_ngcontent-%COMP%]{color:var(--danger-color);font-size:.875rem;margin-top:.25rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#1e87ff;color:#fff;border:none;border-radius:var(--border-radius);font-size:1rem;cursor:pointer;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.auth-link[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:var(--text-color)}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:1rem}.auth-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};function X(t,a){t&1&&(i(0,"div",14),o(1," Name is required "),r())}function Y(t,a){t&1&&(i(0,"div",14),o(1," Please enter a valid email "),r())}function Z(t,a){t&1&&(i(0,"div",14),o(1," Password must be at least 8 characters "),r())}function $(t,a){if(t&1&&(i(0,"div",14),o(1),r()),t&2){let n=b();m(),C(" ",n.errorMessage," ")}}var L=class t{constructor(a,n,e,p){this.fb=a;this.authService=n;this.router=e;this.snackBar=p;this.registerForm=this.fb.group({name:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(8)]]})}registerForm;errorMessage="";onSubmit(){if(this.registerForm.invalid)return;let{name:a,email:n,password:e}=this.registerForm.value;this.authService.register(a,n,e).subscribe({next:()=>{this.snackBar.open("Registration successful!","Dismiss",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/auth/login"])},error:p=>{console.error("Registration error:",p);let B=p?.error?.error||"Registration failed. Please try again.";this.snackBar.open(B,"Dismiss",{duration:5e3,panelClass:["error-snackbar"]})}})}get name(){return this.registerForm.get("name")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}static \u0275fac=function(n){return new(n||t)(l(N),l(w),l(S),l(P))};static \u0275cmp=v({type:t,selectors:[["app-register"]],decls:27,vars:6,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Enter your name"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password"],["type","submit",1,"btn-primary",3,"disabled"],[1,"auth-link"],["routerLink","/auth/login"],[1,"error-message"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Register"),r(),i(4,"form",2),h("ngSubmit",function(){return e.onSubmit()}),i(5,"div",3)(6,"label",4),o(7,"Name"),r(),u(8,"input",5),c(9,X,2,0,"div",6),r(),i(10,"div",3)(11,"label",7),o(12,"Email"),r(),u(13,"input",8),c(14,Y,2,0,"div",6),r(),i(15,"div",3)(16,"label",9),o(17,"Password"),r(),u(18,"input",10),c(19,Z,2,0,"div",6),r(),c(20,$,2,1,"div",6),i(21,"button",11),o(22,"Register"),r()(),i(23,"p",12),o(24,"Already have an account? "),i(25,"a",13),o(26,"Login"),r()()()()),n&2&&(m(4),s("formGroup",e.registerForm),m(5),s("ngIf",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.touched)),m(5),s("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),m(5),s("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),m(),s("ngIf",e.errorMessage),m(),s("disabled",e.registerForm.invalid))},dependencies:[f,O,x,k,F,R,E,g,y,M,_],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 200px);padding:2rem}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);padding:2rem;width:100%;max-width:400px}.auth-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--dark-color);text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:var(--border-radius);font-size:1rem}.error-message[_ngcontent-%COMP%]{color:var(--danger-color);font-size:.875rem;margin-top:.25rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#1e87ff;color:#fff;border:none;border-radius:var(--border-radius);font-size:1rem;cursor:pointer;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.auth-link[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:var(--text-color)}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:1rem}.auth-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var ee=[{path:"login",component:I},{path:"register",component:L}],A=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=j({type:t});static \u0275inj=D({imports:[g.forChild(ee),f,g]})};export{A as AuthModule};
